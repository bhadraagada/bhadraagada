name: Snake Eats Commits

on:
  push:
    branches: [ main ]

jobs:
  snake-eater:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Simulate Snake Eating Commits
        run: |
          echo "Preparing the snake..."
          python3 - << 'EOF'
          import subprocess
          import time

          # Fetch the last 10 commit messages (adjust the number as needed)
          commit_log = subprocess.getoutput('git log -n 10 --pretty=format:"%s"')
          commits = commit_log.splitlines()
          
          if not commits:
              print("No commits found!")
              exit(0)
          
          snake = "🐍"
          print("Commits to be devoured:")
          for idx, commit in enumerate(commits, 1):
              print(f"{idx}. {commit}")
          
          print("\nThe snake begins its feast...\n")
          for commit in commits:
              print(f"{snake} devours commit: {commit}")
              time.sleep(1)  # pause for dramatic effect
          
          print("\nAll commits have been devoured by the snake!")
          EOF
